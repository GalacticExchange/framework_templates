#!/usr/bin/env bash


function is_in_activation {
   activation=$(/sbin/service "$1" status | grep "running" )
   if [ -z "$activation" ]; then
      true;
   else
      false;
   fi

   return $?;
}

#while is_in_activation network ; do true; done


rm /tmp/*.pid

service ssh start

echo "Zookeper" >> /tmp/INIT_LOG

service zookeeper-server start

echo "MySQL" >> /tmp/INIT_LOG

service mysql start

echo "NameNode" >> /tmp/INIT_LOG

service hadoop-hdfs-namenode start

echo "Cassandra" >> /tmp/INIT_LOG

service cassandra start

echo "Elastic Search" >> /tmp/INIT_LOG

service elasticsearch start



echo "Resource Manager" >> /tmp/INIT_LOG

service hadoop-yarn-resourcemanager start

hdfs dfsadmin -safemode leave

rm -rf  /var/lib/hive/metastore/metastore_db/*.lck

echo "hive metastore" >> /tmp/INIT_LOG

service hive-metastore start

#service kafka-server start

echo "Schema Registry Start" >> /tmp/INIT_LOG

/usr/bin/schema-registry-start /etc/schema-registry/schema-registry.properties.dpkg-new &


echo "HTTPFS" >> /tmp/INIT_LOG

service hadoop-httpfs start

echo "spark-master" >> /tmp/INIT_LOG

service spark-master start

echo "spark-history" >> /tmp/INIT_LOG

service spark-history-server start

echo "mr history" >> /tmp/INIT_LOG

service hadoop-mapreduce-historyserver start

#echo "yarn proxy" >> /tmp/INIT_LOG

#service hadoop-yarn-proxyserver start
# ENTERPRISE service hbase-master start
# ENTERPRISE service hbase-thrift start
# ENTERPRISE service hbase-rest start


echo "sqoop2" >> /tmp/INIT_LOG

service sqoop2-server start

echo "hue" >> /tmp/INIT_LOG

service hue start

export HIVE_PORT=10001

echo "hive-server 2" >> /tmp/INIT_LOG

service hive-server2 start

echo "webhcat" >> /tmp/INIT_LOG

service hive-webhcat-server start
# ENTERPRISE service impala-catalog start

# ENTERPRISE service impala-state-store start



# ENTERPRISE if [[ -v FIRST_RUN ]]
# ENTERPRISE then
# ENTERPRISE sudo oozie-setup sharelib create -fs hdfs://localhost:8020 -locallib /usr/lib/oozie/oozie-sharelib-yarn
# ENTERPRISE fi



# ENTERPRISE service oozie start


