echo "Waiting for VPN" >> /tmp/INIT_LOG

while  [ ! "/sbin/ifconfig tun0" ];
do
    sleep 0.1
    echo "waiting for the net..."
done


service ssh start



echo "HDFS datanode" >> /tmp/INIT_LOG

service hadoop-hdfs-datanode start

echo "Yarn nodemanager" >> /tmp/INIT_LOG

service hadoop-yarn-nodemanager start

echo "Kafka" >> /tmp/INIT_LOG

#service kafka-server start Cloudera

export  KAFKA_HEAP_OPTS="-Xmx50M -Xms50M"
/usr/bin/kafka-server-start /etc/kafka/kafka.server.properties &

echo "Cassandra" >> /tmp/INIT_LOG

service cassandra start

echo "elasticsearch" >> /tmp/INIT_LOG
chmod 0755 /etc/init.d/elasticsearch
service elasticsearch start

echo "Hue" >> /tmp/INIT_LOG

service hue start



echo "Spark worker" >> /tmp/INIT_LOG

/usr/lib/spark/sbin/start-slave.sh &


echo "Kibana" >> /tmp/INIT_LOG

chmod 0755 /etc/init.d/kibana
service kibana start

echo "Neo4j" >> /tmp/INIT_LOG

mkdir -p /var/run/neo4j
/usr/bin/neo4j start

echo "Nifi" >> /tmp/INIT_LOG

/usr/local/nifi/bin/nifi.sh start

# ENTERPRISE service impala-server start
# ENTERPRISE service solr-server start

# ENTERPRISE sudo oozie-setup sharelib create -fs localhost:8020 -locallib /usr/lib/oozie/oozie-sharelib-yarn.tar.gz
#service flume-ng-agent start

#XXXX temporarily removed sudo -u spark hadoop fs -put /usr/lib/spark/lib/spark-assembly.jar /user/spark/share/lib/spark-assembly.jar





